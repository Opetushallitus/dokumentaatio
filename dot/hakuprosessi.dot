digraph haku {
  rankdir=LR;
  node [shape = circle];
  subgraph cluster_virkailija {
      color=gray
      subgraph cluster_lisahaku {
          label="Haku ilman sijoittelua"
          color=blue
          Valinta
      }
      subgraph cluster_yhteishaku {
          label="Haku sijoittelulla"
          color=blue
          Laskenta -> Sijoittelu
          Sijoittelu -> Sijoittelu
      }
      Valinta -> Hylätty
      Laskenta -> Hylätty
      Sijoittelu -> Julkaisu
      Valinta -> Julkaisu
  }
  Hakutoive -> Valinta
  Hakutoive -> Laskenta
  Hakutoive -> Koe

  Koe -> Laskenta
  Koe -> Valinta

  Julkaisu -> Vastaanotto

  Vastaanotto -> Peruttu
  Vastaanotto -> Ilmoittauduttu

  Hakutoive[shape="doublecircle"]
  Ilmoittauduttu[shape="doublecircle"]
  Peruttu[shape="doublecircle"]
  Hylätty[shape="doublecircle"]
}


