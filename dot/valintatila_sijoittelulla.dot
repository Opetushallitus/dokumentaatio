digraph finite_state_machine {
  rankdir=LR;
  node [shape=circle];
  Hakutoive -> HYLATTY [label="Virkailija hylkää"];
  Hakutoive -> HYVAKSYTTY [label="Virkailija hyväksyy"];
  Hakutoive -> PERUUTETTU [label="Virkailija peruu oppijan puolesta"];
  Hakutoive -> VARALLA [label="Hyväksytty alemmalle hakutoiveelle"];
  VARALLA -> VARASIJALTA_HYVAKSYTTY [label="Vapautunut paikka tarjotaan oppijalle"];
  HYVAKSYTTY -> PERUUNTUNUT [label="Oppija vastaanottaa toisen paikan"];
  Hakutoive -> PERUNUT [label="Oppija peruu paikan OHP:n kautta"];
  HYVAKSYTTY -> PERUNUT [label="Oppija ilmoittaa peruvansa paikan"];
  Hakutoive -> HARKINNANVARAISESTI_HYVAKSYTTY [label="Virkailija pakottaa hyväksymisen"];

  HYVAKSYTTY, VARASIJALTA_HYVAKSYTTY, HARKINNANVARAISESTI_HYVAKSYTTY -> Julkaistu
  PERUUTETTU, PERUUNTUNUT, PERUNUT -> Julkaistu

  Julkaistu -> Vastaanotto [style=dotted]
  Vastaanotto [shape=none]

  HARKINNANVARAISESTI_HYVAKSYTTY [label="HARKINNAN\nVARAISESTI\n_HYVAKSYTTY"];
  VARASIJALTA_HYVAKSYTTY [label="VARASIJALTA\n_HYVAKSYTTY"];
  Hakutoive [shape=doublecircle];
  Julkaistu [shape=doublecircle];
}
